<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title id="pageTitle">Multiplayer Prompt</title>
<link rel="stylesheet" href="../../style.css">
  <style>
    .storyButton {
	width: 100%;
	color: white;
    }
    .storyButton:hover {
      background: #ffffff;
    }
    article {
      max-width: 1000px;
    }
button{
	width: 50%;
}
#conditionButtons {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin-bottom: 1rem;
}

#conditionButtons button {
  padding: 0.5rem 1rem;
  font-weight: bold;
  cursor: pointer;
  display: flex;
  gap: 1rem;
}

.narrative-box {
  background: #111;
  color: #eee;
  padding: 1rem;
  border-radius: 6px;
  font-family: serif;
  white-space: pre-wrap;
}



    #copyBuffer {
      position: absolute;
      left: -9999px;
    }

    /* HP Tracker as two boxes */
    #hpContainer {
      display: flex;
      justify-content: space-between;
      gap: 20px;
      margin: 20px auto;
    }
    .hp-box {
      background: #676767;
      border: 2px solid #303030;
      border-radius: 8px;
      padding: 10px;
      width: 48%;
      text-align: right;
    }
    .hp-box h3 {
      color: white;
      margin-bottom: 12px;
	margin-top: 12px;
	text-align: center;
	font-size: 30px;
    }
    .hp-entry {
      display: flex;
      align-items: right;
      justify-content: space-between;
      margin-bottom: 8px;
  gap: 8px;

    }
    .hp-entry span {
      flex: 1;
	width: 100px;    
    }
    .hp-entry input[type="number"] {
      width: 50px;
      margin: 0px;
  	text-align: center;
	background: #a1a1a2;

    }
	.gray{
	margin: 0;
	padding
	background: #303030;
}
.hp-entry {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.5rem 0;
  border-bottom: 1px solid #ccc;
}

.hp-left {
  flex: 1;
  font-weight: bold;
  padding-right: 1rem;
	text-align: left;
}

.hp-right {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.hp-right input[type="number"] {
  width: 4rem;
  text-align: center;
}

.dead-toggle {
  display: flex;
  align-items: center;
  gap: 0.25rem;
  cursor: pointer;
}
.col {
  flex: 1;
width: 33%;
}
.col button{
width: 100%;
}
.continueButtons{
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  justify-content: center;
width: 100%;

}
.continueButtons button{
  flex: 1 1 200px; /* grow, shrink, base width */
  padding: 0.75rem 1rem;
  font-size: 1rem;
  font-weight: bold;
  text-align: center;
  }
.continueButtons a{
	display: inline-block;
	width: 40%;
}
#storyBox{
	background: #676767;
}
#conditionText{
	background: #303030;
}
#narrativeContent{
	background: #676767;
	padding: 10px;
}
button{
color: white;
}
#openNewTab{
width: 100%;
}
#conditionButtons {
  display: flex;
  gap: 20px;
  justify-content: center;
  margin-top: 2rem;
}

.col {
  display: flex;
  flex-direction: column;
  gap: 10px;
  width: 200px; /* fixed width for consistent button sizing */
}

.col button {
  height: 48px;
  width: 100%;
}

  </style>
</head>
<body>
<article>
<div class="container">

<img src="https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/i/71515031-3f45-4117-abcd-a4fc1856b7d7/d6501sy-73956cdd-e523-4ac3-9b77-6d2c6ca2bab7.gif">
  <div>
  <h2 id="promptTitle">Your Prompt Title Here</h2>
  <p>By Tenshilove</p>
</div>
<img src="https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/i/71515031-3f45-4117-abcd-a4fc1856b7d7/d6501sy-73956cdd-e523-4ac3-9b77-6d2c6ca2bab7.gif">

</div>

<hr>

  <div id="customDisplay"></div>
  <button class="storyButton" onclick="goToFix()">Fix Parameters</button>
  <button class="storyButton" onclick="goToPage('index')">To Index</button>

  <div class="story">
    <div id="storyBox"></div>
	<BR>
    <button class="storyButton" onclick="copyStory()">Copy Story</button>
  </div>

<button id="openNewTab">Open Outcome Page</button>

<hr>


<h1>HP Tracker</h1>

  <!-- HP Tracker: two boxes side-by-side -->
  <div id="hpContainer">
    <div class="hp-box" id="partyBox">
	<div class="gray">
      <h3>Party</h3>
<hr>
	</div>
      <div id="partyRows"></div>
    </div>
    <div class="hp-box" id="enemyBox">
	<div class="gray">
      <h3>Enemy</h3>
<hr>
	</div>
      <div id="enemyRows"></div>
    </div>
  </div>

  <textarea id="copyBuffer"></textarea>

<div id="conditionButtons">
<div class="col">
  <button data-key="partyVictory">Full Party Victory</button>
  <button data-key="manDownFlee">Man Down Flee</button>
</div>

<div class="col">
  <button data-key="manDownVictory">Man Down Victory</button>
  <button data-key="partyFlee">Full Party Flee</button>
</div>

<div class="col">
  <button data-key="partyKill">Total Party Kill</button>
  <button data-key="fleeBeforeBattle">Flee Before Battle</button>
</div>

<div class="col">
  <button data-key="healSpring">Heal Spring (need dryads herbs)</button>
  <button data-key="headHome">Head Home, Don't Heal Spring</button>
</div>
</div>

<div id="conditionText" class="narrative-box">
  <div id="narrativeContent"></div>
  <button id="copyNarrative">Copy Text</button>
</div>
<br>
<div class="continueButtons">
  <button data-href="index.html">Quest Failed</button>
  <button data-href="complete.html">Quest Complete</button>
</div>


</article>

<script>
  // 0) params & helpers
  const params = new URLSearchParams(window.location.search);
  const lc  = s => (s||"").toLowerCase();
  const cap = s => (s||"")[0]?.toUpperCase() + (s||"").slice(1);

  // pronouns (unchanged)
  function pronounSet(subj) {
    subj = lc(subj);
    if (subj==="she")  return {HeSheThey:"she", HimHerThem:"her", HisHerTheir:"her", HisHersTheirs:"hers", WasWere:"was", DoesDo:"does", HasHave:"has"};
    if (subj==="he")   return {HeSheThey:"he", HimHerThem:"him", HisHerTheir:"his", HisHersTheirs:"his", WasWere:"was", DoesDo:"does", HasHave:"has"};
    if (subj==="they") return {HeSheThey:"they", HimHerThem:"them", HisHerTheir:"their", HisHersTheirs:"theirs", WasWere:"were", DoesDo:"do",  HasHave:"have"};
    return           {HeSheThey:"it", HimHerThem:"it",  HisHerTheir:"its", HisHersTheirs:"its", WasWere:"was", DoesDo:"does", HasHave:"has"};
  }

  // ensure required params
  const required = [];
  for (let i=1; i<=4; i++) {
    ["Name","HeSheThey","Class","Weapon","Damage"]
      .forEach(f => required.push(`Player${i}${f}`));
  }
  if (required.some(k => !params.get(k))) {
    window.location.href = `fix.html?${params}`;
  }

  // 4) define globals for Player1…Player4 and build players[]
  const players = [];
  for (let i = 1; i <= 4; i++) {
    const rawName  = params.get(`Player${i}Name`)     || "";
    const rawPron  = params.get(`Player${i}HeSheThey`)|| "";
    const rawClass = params.get(`Player${i}Class`)    || "";
    const rawWeap  = params.get(`Player${i}Weapon`)   || "";
    const rawDmg   = params.get(`Player${i}Damage`)   || "";

    const Name      = cap(lc(rawName));
    const HeSheThey = lc(rawPron);
    const Class     = cap(lc(rawClass));
    const Weapon    = cap(lc(rawWeap));
    const Damage    = lc(rawDmg);

    const pfx       = pronounSet(HeSheThey);

    window[`Player${i}Name`]          = Name;
    window[`Player${i}HeSheThey`]     = pfx.HeSheThey;
    window[`Player${i}HimHerThem`]    = pfx.HimHerThem;
    window[`Player${i}HisHerTheir`]   = pfx.HisHerTheir;
    window[`Player${i}HisHersTheirs`] = pfx.HisHersTheirs;
    window[`Player${i}WasWere`]       = pfx.WasWere;
    window[`Player${i}DoesDo`]        = pfx.DoesDo;
    window[`Player${i}HasHave`]       = pfx.HasHave;
    window[`Player${i}Class`]         = Class;
    window[`Player${i}Weapon`]        = Weapon;
    window[`Player${i}Damage`]        = Damage;

    players.push({Name, HeSheThey, Class, Weapon, Damage});
  }


  // render top summary
  document.getElementById("customDisplay").innerHTML =
    players.map((p, i) =>
      `<strong>Player ${i+1}:</strong> ${p.Name} — <em>${p.HeSheThey}</em> | Class: ${p.Class} | Weapon: ${p.Weapon} | Damage: ${p.Damage}`
    ).join("<br>");

  // story injection
  const storyText = `The adventurers navigated a landscape that seemed to weep decay. Their quest had finally led them to the poisoned heart of the land, the Tainted Spring.

The vibrant greens and earthy browns that once defined the Sage Forest had surrendered to an oppressive monochrome. Trees, once proud sentinels reaching for the sun, now stood as skeletal husks, their bark peeling like sunburnt skin, their branches brittle fingers clawing at an indifferent sky. The forest floor, usually a soft carpet of moss and fallen leaves, was now a brittle testament to blight – a choking layer of crumbled black ash. The air, thicker than any fog, carried a putrid stench that clung to their throats, each breath a reminder of the creeping corruption. ${Player3Name} gagged softly. "By the Great Eye," ${Player3HeSheThey} rasped, ${Player3HisHerTheir} voice raw, "what is that abominable smell?"

Even the babbling brook that had guided them, a silver thread through the emerald tapestry of the forest, had succumbed. Its gentle murmur was replaced by a viscous, gurgling sigh. The once clear water now flowed as a sluggish, obsidian sludge, thick with unsettling specks of unnatural purples and greens. “We’re close,” ${Player4Name} stated  with a determined grit that belied the oppressive atmosphere. “Keep moving. We’re almost there.”

As they pressed onward, an unsettling new flora emerged. Mushrooms, bulbous and alien, erupted from the decaying soil and even clung to the dead trees like parasitic growths. These were not the fungi of healthy ecosystems; their caps pulsed with an unwholesome luminescence, and as the adventurers drew near, they seemed to recoil, expelling clouds of noxious gas and a viscous, burning liquid that sizzled on contact with the already dead wood. 

${Player1Name} instinctively pulled back, eyes narrowed with caution. "Nasty even when they're dying," ${Player1HeSheThey} muttered, drawing a hand across ${Player1HisHerTheir} brow, slick with sweat and a fine layer of black dust.

Finally, cresting a low, desolate hill, they came upon the tainted Spring. It was not a serene pool of life-giving water, but a festering wound in the forest. The black and green sludge churned and oozed from a jagged fissure in the rock face, a grotesque fountain of contamination. This poisoned torrent, the source of the forest’s demise, flowed endlessly into the dying brook, its tendrils of blight reaching out to poison every river and stream that sustained life in the distant plains of Prairiedale.

And then they saw it.

Hovering with an inert, horrifying majesty, a colossal figure dominated the immediate surroundings. It was a Mucynoid, a monstrous fungal entity, easily ten feet tall and seven feet wide, its form lumbering and grotesque. Its cap, a vast, obsidian dome, dripped with the very sludge that was killing the land, the toxins seeping from its gills in a constant, sickening rain. It swayed gently, its thick, stalk-like legs planted firmly in the corrupted soil, oblivious to the aries who had finally arrived. 

${Player2Name} let out a soft, involuntary "Eww." The disgust was palpable, a shared sentiment that cut through the oppressive air.

The silence that followed that single, disgusted utterance was heavy with understanding. The creature before them was not merely a passive part of the blight; it was the cause, its living embodiment. Their quest had led them to the source, and the path forward was both terrifying and undeniable. The innocent villagers of Prairiedale, and the creatures who called this forest home, were dependent on the health of the flowing waters, and were counting on them. The very life force of the region was being choked by this monstrous entity.

A silent exchange passed between the adventurers. No grand speeches were needed, no elaborate strategizing. The shared danger, the clear and present threat, forged their resolve into a singular, burning point. They were the shield between life and this suffocating death.

${Player1Name} was the first to move, ${Player1HisHerTheir} hand tightening around ${Player1HisHerTheir} ${Player1Weapon}. A low growl rumbled in ${Player1HisHerTheir} chest. ${Player2Name} reached for ${Player2HisHerTheir} ${Player2Weapon} with movements precise and calm. ${Player3Name} scowled down at the creature, fists balled tightly. ${Player4Name} nodded with resignation. They could do this. They had to.

*************************************IF FOAL IS HERE:*************************************
${Player3Name} turned to the Unicorn foal, who was eager to watch this battle unfold. “Kiddo, I want you to stay low, and stay here where you can watch ok?” the kid easily agreed, excited to see real heroes at work. 

${Player4Name} rubbed his hair affectionately. “Careful not to touch anything.”

“I know,” the kid says. 


The air crackled with anticipation. The Mucynoid continued its slow, blind dance, an ode to decay, utterly unaware of the fury it had inadvertently stirred. But their presence was no longer hidden. Their purpose, honed and sharpened by the arduous journey, now ignited their spirits.

With a unified roar, born not of bloodlust, but of fierce determination and an unwavering commitment to preservation, they charged. Down the blighted hill they ran, a surge of defiant life against the encroaching void, their weapons glinting as they descended upon the monstrous, poisoned heart of the Sage Forest. The fate of Prairiedale, and perhaps much more, rested on their collective strength as they met the corrupted fungus head-on. The battle for the Spring, and for the life it once sustained, had officially begun.
`;
  document.getElementById("storyBox").innerText = storyText;

  function copyStory(){
    navigator.clipboard.writeText(storyText)
      .then(_=>alert("Story copied!"))
      .catch(_=>alert("Copy failed."));
  }

 function renderHPTracker() {
  const partyDiv = document.getElementById("partyRows");
  const enemyDiv = document.getElementById("enemyRows");
  partyDiv.innerHTML = "";
  enemyDiv.innerHTML = "";

players.forEach(p => {
const maxLength = 20;
const displayName = p.Name.length > maxLength
  ? p.Name.slice(0, maxLength) + "…"
  : p.Name;

  const row = document.createElement("div");
  row.className = "hp-entry";

  row.innerHTML = `
    <div class="hp-left">
      <span class="name">${displayName}</span>
    </div>
    <div class="hp-right">
      <input type="number" class="current-hp" value="10" min="0" placeholder="Current">/
      <input type="number" class="max-hp" value="10" min="1" placeholder="Max">
      <label class="dead-toggle">
        <input type="checkbox" title="Dead?">
        ☠
      </label>
    </div>
  `;

  partyDiv.appendChild(row);
});



  // enemy row
  const m = document.createElement("div");
  m.className = "hp-entry";
  m.innerHTML = `
    <div class="hp-left">
      <span class="name">King Mucynoid</span>
    </div>


    <div class="hp-right">
      <input type="number" class="current-hp" value="50" min="0" placeholder="Current">/
      <input type="number" class="max-hp" value="50" min="1" placeholder="Max">
      <label class="dead-toggle">
        <input type="checkbox" title="Dead?">
        ☠
      </label>
    </div>
  `;
  enemyDiv.appendChild(m);
}
renderHPTracker();


  // sync titles + nav helpers
  const title = "Tainted Spring: King Mucynoid Fight!";
  document.getElementById("pageTitle").innerText   = title;
  document.getElementById("promptTitle").innerText = title;

  function goToFix()    { window.location.href = `fix.html?${params}`; }
  function goToPage(pg){ window.location.href = `${pg}.html?${params}`; }

const conditionMap = {
  partyVictory: `The battle had raged for what felt like an eternity, the air thick with the smell of rot and the monster's poisonous smog. The party, exhausted and battered, had pushed the grotesque mushroom creature to its limit. Its movements, once swift and deliberate, had become sluggish, its giant, fungus-covered body swaying unsteadily on its thin legs. With a guttural, wheezing sound, it spewed one last, desperate plume of toxic gas.


${Player2Name}, seeing the creature's opening, seized the opportunity. With a final surge of adrenaline, ${Player2HeSheThey} lunged forward, their ${Player2HisHerTheir} raised high. The air crackled with determination, and ${Player2HisHerTheir} movement was a blur against the swamp's grimy backdrop. With a forceful swing, ${Player2HisHerTheir} WEAPON struck down the creature’s stalk-like leg, the blade making a sickening squelch as it found its mark. The mushroom monster's equilibrium was shattered.



The giant creature toppled over with a tremendous crash, shaking the ground and sending a fresh wave of vile sludge splashing across the bog. Its giant, black cap hit the muck first, a final, despairing hiss of poison smog escaping from beneath it before falling silent forever. The rest of its round, fleshy body followed, lying inert and defeated in the mire. As the last of the creature's foul miasma dissipated, a tense silence fell over the bog, broken only by the sound of the party's ragged breathing.
`,
  manDownVictory: `The battle ended not with a roar of triumph, but with a weary silence punctuated by strained breaths. The giant mushroom lay defeated in the sludge, its monstrous form now just a festering carcass, yet the cost of the victory lay plain on the muddy ground. 

DOWNEDPLAYER(s) (was/were) slumped and unconscious, their body(ies) still and unresponsive after the final, devastating attacks. STANDINGPLAYER, bruised and exhausted, carefully made their way to their fallen comrade(s). With heavy heart(s) and aching muscles, they hoisted their fainted ally(ies) onto their shoulders, the celebratory mood of their victory replaced by the somber reality of their sacrifice. 

They had saved the day, but the bittersweet burden of their wounded weighed them down, a quiet testament to the price of their success.`,
  partyKill: `As the last of them fell, the world began to fade into a sickly, gray haze. The giant mushroom's poisonous smog filled their lungs, and the ground, saturated with decay, offered a cold, unforgiving bed.

 Weakened by the constant, suffocating stench, their bodies became nothing more than silent sacrifices in the bog. The mushroom monster, now victorious, receded into the swamp's shadows, leaving them for dead.



Weeks passed, and the party lay still, forgotten. Moss and thick green sludge began to creep over their bodies, covering their armor and weapons in a damp, earthy blanket. They were barely alive, their heartbeats a slow, faint thrum against the wet, cold ground.


The next set of adventurers that took up the quest were more successful, and after they concluded their own battle against the great Mucynoid, the spring was finally purified. They discovered the party by a stroke of luck, seeing a faint shimmer of metal beneath the fungal overgrowth. Their mission was to save the forest, and the party's near-death was nothing more than an afterthought. They brought back the barely living group as they returned to the village for their prize. 



Our adventurers awoke in the sterile, unfamiliar surroundings of a Prairiedale temple infirmary, feeling a profound sense of wrongness. The air was clean, a stark contrast to the foul odor that had become their home. 

${Player1Name} mumbled, "We failed," the words like a physical weight on ${Player1HisHerTheir} chest. The healers' faces were grim, reflecting the truth of their failure, not the joy of victory.


For days, they underwent intense healing, each touch of magic a reminder of their inadequacy. The townspeople’s pitying glances and hushed whispers were a constant torment. They were not greeted as heroes, but as reminders of a tragedy that had been narrowly avoided.

 Finally, after a long and grueling recovery, they were well enough to leave. They left Prairiedale not with the cheers of a grateful people, but with the quiet, lingering shame of their failure.

Bad End: Quest Failed`,
  manDownFlee: `The air was thick with the acidic scent of the Mucynoid's poison, and the monster's guttural wheezes seemed to mock their every move. 

One by one, the party had fallen. FALLENPLAYER was knocked unconscious, their body limp against the boggy ground. The remaining aries fought with a desperation born of fear, their weapons striking against the monster’s thick flesh with little effect. The horrible truth dawned on STANDINGPLAYER: they couldn't win this. They could only save who they could.

"We have to go!" PLAYER shouted, but their voice was lost in the swamp's heavy, suffocating silence.  

 The mushroom monster, seemingly amused by their struggle, drew back its grotesque, roundish body, preparing for a final, devastating lunge. PLAYER knew they couldn’t possibly defend themself and carry their fallen allies. A cold, bitter shame washed over them, but the promise of survival was a more powerful motivator.


With a heavy heart, PLAYER made the tactical decision to retreat. Fighting through the monster's last-ditch attack, they made a mad dash toward their fallen comrade(s). They hoisted the unconscious adventurer(s) onto their back, the extra weight and the smell of rot making their flight even more difficult. The monster's low, rumbling laughter followed them, a constant reminder of their failure. The journey back to Prairiedale was a grueling ordeal of carrying their wounded, the silence of their shame broken only by the grunts of exertion and the faint sounds of their breathing.

 They returned to the village not as heroes, but as survivors, burdened by the heavy knowledge of their failure and the unspoken question of whether their comrades would ever truly recover.

Bad End: Quest Failed`,
  partyFlee: ` The monster, a grotesque figure of fungal decay, landed another devastating blow, and the air thickened with its noxious fumes. ${Player2Name} instinctively retreated, ${Player2HisHerTheir} ${Player2Weapon} heavy and useless against the seemingly impenetrable black cap of the creature. 
${cap(Player2HeSheThey)} glanced at ${Player2HisHerTheir} comrades, seeing the same exhaustion and despair in their eyes. This wasn't a winnable fight, not with their current strength. The mushroom monster was simply too powerful, too resilient, and their health was quickly dwindling.


"We can't win this," ${Player1Name}'s voice was low, barely a whisper over the bubbling of the bog, "We need to fall back!" 

The words, a bitter pill to swallow, hung in the air for a moment before ${Player4Name} nodded in grim agreement. A strategic retreat was their only option; to stay would mean certain death, their bodies becoming just another part of this blighted landscape. The shame of their failure burned hotter than any monster's attack, but the cold, hard logic of survival outweighed their pride. They had to live to fight another day.



Turning their backs to the hulking beast, they fled the stinking quagmire, the sound of its thunderous stomps echoing behind them. 

The long, silent walk back to the village was filled with a sense of utter defeat. The spring remained poisoned, and they had nothing but their lives to show for their efforts. 

As they entered Prairiedale, they avoided the curious stares of the villagers, their heads bowed low. They had failed, and they knew it. But amidst the bitter taste of defeat, a flicker of resolve burned. This was not the end; it was merely a temporary setback. They would gather their strength, learn from their mistakes, and return with a new plan and more hands.

Bad End: Quest Failed`,

headHome: `"We did it!" ${Player3Name} shouted, ${Player3HisHerTheir} voice strained but filled with triumph. The words were a rallying cry, and the party, still weary from the hard-fought battle, gathered around the defeated foe. 

The bog was still an awful, poisonous place, but the air no longer carried the overwhelming stench of decay. They had succeeded, and the villagers in Prairiedale would be safe.


The journey back was filled with a mixture of exhaustion and exhilaration. They recounted the harrowing battle, their faces illuminated by the forest's dappled sunlight, a sharp contrast to the suffocating darkness of the mushroom's domain. 

When they finally emerged from the woods and the village came into view, they were met not with the sight of a people in despair, but with a throng of people anxiously awaiting their arrival.`,
healSpring: `"This isn't over yet," ${Player3Name} said, ${Player3HisHerTheir} gaze fixed on the spring, which continued to belch foul, dark water despite the creature's defeat.

 "The Dryad’s herbs." ${Player4Name} produced the small pouch, the air around it smelling faintly of fresh grass and clean rain. It was a stark contrast to the overpowering odor of the toxic swamp. They all made their way to the spring's edge, where thick, black sludge still churned and bubbled.


Taking the herbs, ${Player1Name} carefully spread them over the spring's polluted surface. The moment the herbs touched the water, they began to glow with a gentle, radiant light, and slowly, they dissolved into the poisoned flow. The sludge roiled and hissed, as if fighting against the purity, but the herbs' magic was relentless. The spring, once an emblem of decay, began to clear. The dark, oily sheen dissipated, and the foul smell receded, replaced by the fresh, clean scent of life. 

Within moments, clear, sparkling water began to bubble up from the depths. The land around the spring still bore the scars of the Mucynoid's presence, but with clean water flowing once more, the forest's healing could finally begin. The party stood together, watching the water flow freely, a quiet pride settling over them, a feeling more victorioius than any celebratory fanfare. They had not only defeated the beast but had also restored the very heart of the forest.`,
  fleeBeforeBattle: `They cant flee before battle`
};

const contentBox = document.getElementById("narrativeContent");

document.getElementById("conditionButtons").addEventListener("click", e => {
  if (e.target.tagName !== "BUTTON") return;

  const key = e.target.dataset.key;
  const text = conditionMap[key] || "No narrative available.";
  contentBox.textContent = text;
});

document.getElementById("copyNarrative").addEventListener("click", () => {
  const text = contentBox.textContent.trim();
  if (!text) return;

  const btn = document.getElementById("copyNarrative");

  navigator.clipboard.writeText(text)
    .then(() => {
      btn.textContent = "Copied!";
      setTimeout(() => {
        btn.textContent = "Copy Text";
      }, 1500);
    })
    .catch(() => {
      btn.textContent = "Copy failed";
      setTimeout(() => {
        btn.textContent = "Copy Text";
      }, 1500);
    });
});

document.querySelectorAll(".continueButtons button").forEach(btn => {
  btn.addEventListener("click", () => {
    const baseURL = btn.dataset.href;
    const currentParams = window.location.search; // includes the "?" prefix
    const fullURL = baseURL + currentParams;
    window.location.href = fullURL;
  });
});

document.getElementById("openNewTab").addEventListener("click", () => {
  const targetURL = "https://perchance.org/oa-battle-sim-tainted-spring-mud-slime-fight-1"; // replace with your actual link
  const currentParams = window.location.search;
  const fullURL = targetURL + currentParams;

  window.open(fullURL, "_blank");
});



</script>
</body>
</html>

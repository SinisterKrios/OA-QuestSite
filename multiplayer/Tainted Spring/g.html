<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title id="pageTitle">Multiplayer Prompt</title>
  <link rel="stylesheet" href="../../style.css">
  <style>
/* container and segment sizing */
.story {
  max-width: 1000px;
  margin: 0 auto;
}

.story-segment {
  background: #676767;            /* match your dark box look if needed */
  color: #eee;
  border-radius: 6px;
  padding: 1rem;
  margin: 0.75rem 0;
  display: flex;
  flex-direction: column;
  gap: 0.6rem;
}

/* preserve newlines but allow wrapping so lines don't grow horizontally */
.story-segment pre {
  white-space: pre-wrap;      /* preserves newlines and allows wrapping */
  word-break: break-word;
  margin: 0;
  font-family: serif;         /* match your aesthetic from template */
  line-height: 1.4;
  max-height: 240px;          /* limit visible height */
  overflow: auto;             /* enable internal scrolling if needed */
  padding-right: 0.25rem;     /* room for scrollbar */
}

/* keep the copy button sized and aligned */
.story-segment .storyButton {
  align-self: flex-end;
  padding: 0.35rem 0.8rem;
  font-size: 0.95rem;
  border-radius: 6px;
  width: auto;
  min-width: 72px;
background-color: #303030;
}


    .button-group {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: auto;
    }
    #copyBuffer {
      position: absolute;
      left: -9999px;
    }
    .option-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      margin-top: 30px;
    }
    .option-box {
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      background: #676767;
      border: 2px solid #303030;
      border-radius: 8px;
      padding: 15px;
      text-align: left;
      min-height: 280px;
    }
    .option-box h3 {
      margin-top: 0;
      color: #ffffff;
    }
    .option-box p {
      margin: 8px 0;
    }
    .result-box {
      display: none;
      margin-top: 30px;
      background: #676767;
      border: 2px solid #303030;
      border-radius: 8px;
      padding: 20px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      text-align: left;
    }
    .result-box h3 {
      margin-top: 0;
      color: #ffffff;
    }
    #resultActions {
      margin: 15px 0;
    }
	button{
		color: white;
}
.option-grid{
	background-color: #303030;
	padding: 20px;
}
.option-box button{
	background-color: #303030;
}

/* container: place buttons side-by-side */
.button-group, #resultActions{
  display: flex;
  gap: 10px;
  align-items: stretch; /* ensure children fill cross axis */
}

/* make every button share space and have identical height */
.button-group .storyButton, #resultActions button{
  flex: 1 1 0;         /* grow and shrink equally, no base width bias */
  min-width: 0;        /* allow proper shrinking inside grid */
  box-sizing: border-box;
  height: 48px;        /* fixed height so all match exactly */
  padding: 0 1rem;     /* horizontal padding only (vertical controlled by height) */
  display: inline-flex;
  align-items: center; /* center label vertically */
  justify-content: center;
  border-radius: 8px;
background-color: #303030;
}

.option-box hr{
  border: none;
  height: 1px;
  background: #ccc;        /* line color */
  margin: 0;          /* spacing */
  display: block;  
}

  </style>
</head>
<body class="prompt">
<article>
<div class="container">

<img src="https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/i/71515031-3f45-4117-abcd-a4fc1856b7d7/d6501sy-73956cdd-e523-4ac3-9b77-6d2c6ca2bab7.gif">
  <div>
  <h2 id="promptTitle"></h2>
  <p>By Tenshilove</p>
</div>
<img src="https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/i/71515031-3f45-4117-abcd-a4fc1856b7d7/d6501sy-73956cdd-e523-4ac3-9b77-6d2c6ca2bab7.gif">

</div>

<hr>

  <div id="customDisplay"></div>
  <button class="storyButton" onclick="goToFix()">Fix Parameters</button>
  <button class="storyButton" onclick="goToPage('index')">To Index</button>

  <div class="story">
    <div id="storyBox"></div>
    <button class="storyButton" onclick="copyStory()">Copy Story</button>
  </div>

  <div class="option-grid" id="optionGrid"></div>

  <div class="result-box" id="resultBox">
    <h3 id="resultTitle"></h3>
    <p id="resultText"></p>
    <div id="resultActions"></div>
  </div>

  <textarea id="copyBuffer"></textarea>
</article>

<script>
  // 0) pull URL params
  const params = new URLSearchParams(window.location.search);

  // 1) simple casing helpers
  const lc  = s => (s||"").toLowerCase();
  const cap = s => (s||"")[0]?.toUpperCase() + (s||"").slice(1);

  // 2) pronounSet → flat keys your template expects
  function pronounSet(subj) {
    subj = lc(subj);
    switch (subj) {
      case "she":  return { HeSheThey:"she", HimHerThem:"her", HisHerTheir:"her", HisHersTheirs:"hers", WasWere:"was", DoesDo:"does", HasHave:"has" };
      case "he":   return { HeSheThey:"he",  HimHerThem:"him",  HisHerTheir:"his",  HisHersTheirs:"his", WasWere:"was",  DoesDo:"does", HasHave:"has" };
      case "they": return { HeSheThey:"they",HimHerThem:"them",HisHerTheir:"their",HisHersTheirs:"theirs",WasWere:"were", DoesDo:"do",  HasHave:"have" };
      default:     return { HeSheThey:"it",  HimHerThem:"it",   HisHerTheir:"its", HisHersTheirs:"its", WasWere:"was",  DoesDo:"does", HasHave:"has" };
    }
  }

  // 3) ensure we got all params
  const required = [];
  for (let i = 1; i <= 4; i++) {
    required.push(
      `Player${i}Name`,
      `Player${i}HeSheThey`,
      `Player${i}Class`,
      `Player${i}Weapon`,
      `Player${i}Damage`
    );
  }
  if (required.some(k => !params.get(k))) {
    window.location.href = `fix.html?${params}`;
  }

  // 4) define real globals for Player1…Player4
  const players = [];
  for (let i = 1; i <= 4; i++) {
    const rawName  = params.get(`Player${i}Name`)    || "";
    const rawPron  = params.get(`Player${i}HeSheThey`)|| "";
    const rawClass = params.get(`Player${i}Class`)   || "";
    const rawWeap  = params.get(`Player${i}Weapon`)  || "";
    const rawDmg   = params.get(`Player${i}Damage`)  || "";

    const Name      = cap(lc(rawName));
    const HeSheThey = lc(rawPron);
    const Class     = cap(lc(rawClass));
    const Weapon    = cap(lc(rawWeap));
    const Damage    = lc(rawDmg);

    const pfx = pronounSet(HeSheThey);

    // expose as globals
    window[`Player${i}Name`]          = Name;
    window[`Player${i}HeSheThey`]     = pfx.HeSheThey;
    window[`Player${i}HimHerThem`]    = pfx.HimHerThem;
    window[`Player${i}HisHerTheir`]   = pfx.HisHerTheir;
    window[`Player${i}HisHersTheirs`] = pfx.HisHersTheirs;
    window[`Player${i}WasWere`]       = pfx.WasWere;
    window[`Player${i}DoesDo`]        = pfx.DoesDo;
    window[`Player${i}HasHave`]       = pfx.HasHave;
    window[`Player${i}Class`]         = Class;
    window[`Player${i}Weapon`]        = Weapon;
    window[`Player${i}Damage`]        = Damage;

    // also collect into players[] for the top display
    players.push({Name, HeSheThey, Class, Weapon, Damage});
  }

  // 5) render the top summary
  document.getElementById("customDisplay").innerHTML =
    players.map((p, i) =>
      `<strong>Player ${i+1}:</strong> ${p.Name} — 
       <em>${p.HeSheThey}</em> | Class: ${p.Class} | Weapon: ${p.Weapon} | Damage: ${p.Damage}`
    ).join("<br>");

  // --- NEW: storyText with delimiter and per-segment copy buttons ---
  const storyText = `Before the Aries loomed a colossal cliff face, a jagged scar across the landscape that seemed to mock their progress. Its sheer, dark grey stone rose into the overcast sky, disappearing into a veil of mist that clung to its upper reaches. Rivulets of water, like silver veins, snaked down its surface, rendering the rock face slick and treacherous.

“Well, this is… inconvenient,” grumbled ${Player3Name} running a hand over ${Player3HisHerTheir} face. ${cap(Player3HeSheThey)} recalled the worn parchment map they had received from the elder, a frown deepening on ${Player3HisHerTheir}  brow. “We definitely saw a cliff on the map. It marked a necessary passage to the tainted spring. This must be it.”

${Player2Name} nodded, ${Player2HisHerTheir}  keen eyes scanning the formidable barrier. “The Elder was vague about how to cross, only that we had to. It certainly looks impassable from here.”

“Impassable? Not for us!” ${Player1Name} declared optimistically. ${cap(Player1HeSheThey)} flexed ${Player1HisHerTheir} hands, a glint in ${Player1HisHerTheir} eye. “I say we find the easiest climb and go for it. A few stakes, a good rope, and we’ll be over in no time.”

${Player4Name}  scoffed softly. “${Player1Name}, did you not notice how slick those stones are? Even a mountain goat would think twice. One slip, and we wouldn’t just be delayed, we’d be… well, a lot flatter. We’d surely die.” ${cap(Player1HisHerTheir)} voice held an urgency.

It was ${Player3Name} who noticed something unusual near the base of the cliff, partially obscured by a cluster of ferns and a tangle of thorny bushes. “Wait, hold on a moment,” ${Player3HeSheThey} called, ${Player3HisHerTheir} voice low and steady. ${cap(Player3HeSheThey)} moved towards it, pushing aside the thick foliage. “Hey, look at this!”
 
Beneath the ferns, half-buried in the soil, was a weathered wooden signpost. It was old, encrusted with moss and fallen leaves, almost swallowed by the relentless march of nature. They carefully brushed away the verdant covering, revealing faded script carved into the wood.

The Aries’ eyes widened as the message became clear. In elegant, looping letters, it read: ‘Path to the Spring’. And beneath it, a clear arrow, etched deep into the wood, pointed not up the cliff, but directly into it.

${Player4Name} peered closer. “Into it? You mean… a cave?”

Following the direction of the arrow, ${Player2Name} pushed further into the dense undergrowth that hugged the cliff’s foundation. The air grew cooler, carrying the scent of damp earth and unseen depths. After a few more steps, the thick curtain of ivy and brambles parted slightly, revealing a narrow, almost impossibly hidden opening. It wasn’t a grand archway, but a jagged, dark maw, barely wide enough for two Aries to walk abreast, disappearing into absolute blackness.

“A cave,” ${Player3Name} breathed, a note of awe in ${Player3HisHerTheir}  voice. “A hidden path. Brilliant!”

The adventurers steeled themselves and entered, their heavy boots crunching softly on the loose pebbles at the entrance. One by one, they stepped out of the dim daylight and into the echoing darkness of the mountain’s belly.

The darkness swallowed the last vestiges of daylight, plunging them into a world bereft of sight. ${Player1Name}, who had taken the lead, stumbled slightly, ${Player1HisHerTheir} hand reaching out to find purchase on the rough, damp stone wall.

“Does anyone have a light spell ready? Or maybe a lantern?” ${Player3Name} asks.

${Player4Name} whispers sharply, “No! Not yet. It’s too dangerous to announce our presence. Caves are full of creatures, or monsters, many of whom don’t appreciate visitors. It’s best we stay quiet, move slowly, and hope nothing notices us.”

They shuffled forward, their hands outstretched, feeling the cold, slick rock walls. The air grew heavy with the smell of damp earth, minerals, and something else… something musky and primal.

Just as ${Player2Name} was about to suggest they might try a very dim, focused light spell, a low, rumbling growl echoed through the cavern. It was deep, guttural, and undeniably close. It wasn't aggressive, more a sound of a deep, disturbed sleep, like a massive engine idling.

The adventurers froze.   ${Player1Name}’s eyes, though useless in the dark, were wide with alarm. ${cap(Player1HeSheThey)} whispered, barely audible, "Bear."

A hibernating bear. Waking it up in a confined space would be catastrophic. Their every muscle tensed. The growl slowly softened, dissolving into heavy, ragged breathing that reverberated through the very stones beneath their feet.

Very carefully, very slowly, they continued their progress, their steps feather-light, their breath held. Each rustle of their clothes, each faint scrape of a hoof on stone, felt like a thunderclap. They had, by some miracle, slipped past.

Heartbeats thrumming in their ears, they pressed on, the darkness still absolute. Then, with a sudden, jarring thud, ${Player1Name} walked face-first into something solid.

“Oof!” ${Player1HeSheThey} grunted, stumbling back a step. “What in the…?” ${Player1HeSheThey} reached out, fingers probing the unseen obstruction. It felt yielding yet unyielding, springy but utterly impassable. “It’s… a wall of leaves and thickets,” ${Player1HeSheThey} whispered, ${Player1HisHerTheir} voice laced with confusion.  ${Player1HeSheThey} tried to push through it, leaning ${Player1HisHerTheir} shoulder into the leafy barrier, but it didn’t budge. It was as dense and solid as stone, woven impossibly tight.

The four companions huddled together in the complete darkness, their whispers a frantic counterpoint to the distant, regular breathing of the bear they’d just passed.

“A wall of brambles?”${Player2Name} whispered, “Like the one we passed through to come in?”

“It’s a blockage, that’s what it is,” ${Player3Name}  muttered, rubbing ${Player3HisHerTheir} forehead. “And a very stubborn one. We can’t push through it.” ${Player4Name}, in a quieter voice, added, “Perhaps a magical barrier disguised as foliage? Or a natural growth so dense it’s become truly impenetrable.”

The heavy, musky scent of the sleeping bear seemed to drift closer, and the unseen wall of thorns pressed in on them. The adventurers exchanged uneasy, whispered arguments, the weight of their decision pressing down on them in the suffocating darkness of the cavern.
`.trim();

  // split into segments and render them with copy buttons
  const delimiter = "←—------------------- copy break—----------------->";
  const segments  = storyText.split(delimiter);
  const storyBox  = document.getElementById("storyBox");

  storyBox.innerHTML = ""; // clear

  segments.forEach((text) => {
    const trimmed = text.trim();
    if (!trimmed) return;

    const wrapper = document.createElement("div");
    wrapper.className = "story-segment";

    const pre = document.createElement("pre");
    pre.textContent = trimmed;

    const btn = document.createElement("button");
    btn.type = "button";
    btn.textContent = "Copy";
    btn.className = "storyButton";
    btn.addEventListener("click", () => {
      navigator.clipboard.writeText(trimmed)
        .then(() => {
          btn.textContent = "Copied!";
          setTimeout(() => btn.textContent = "Copy", 1200);
        })
        .catch(() => {
          btn.textContent = "Copy failed";
          setTimeout(() => btn.textContent = "Copy", 1200);
        });
    });

    wrapper.append(pre, btn);
    storyBox.appendChild(wrapper);
  });

  // 7) actions & UI (unchanged from your template2)
  const actions = [
    {
      name:      "Light the way with magic",
      condition: "Requires mage with fire or light spell and the mana to cast it",
      prompt:    `“We need to see what we’re dealing with,” ${Player2Name} urged,  ${Player2HisHerTheir} voice low but firm. “Could you cast a light spell, just a very small, focused orb?”`,
      result:    `50/50 chance for results

MAGE lit the spell on the tip of their **wand or staff**, illuminating the chamber around the Aries. The wall of roughage came into view, thorns and vines twisted into a leafy door. They needed only to strike it in the right spot with a few good hits. 

However, the light from their spell stretched far into the dark cave and, unbeknownst to the Aries it shone in the eyes of the sleeping bear. Blinking awake it stirred with a hefty huff and roused awake. The bear was infuriated with this premature awakening and planned to have its ire known.


MAGE lit the spell on the tip of their **wand or staff**, illuminating the chamber around the Aries. The wall of roughage came into view, thorns and vines twisted into a leafy door. They needed only to strike it in the right spot with a few good hits. 

With the butt of their swords and a few good kicks with a hoof, the adventurers manage to break through the wall of branches and the path opens up to the rest of the forest. It was harrowing, but their brush with the bear ended without conflict. They hurried on into the forest to continue their hike to the spring.`,
      next: [
        { label: "Wake bear",    url: "m" },
        { label: "Escape", url: "l" }
      ]
    },
    {
      name:      "Light way with lantern",
      condition: "Requires item: Lantern",
      prompt:    `“Could we risk lighting the lantern?”

${Player3Name}  immediately shot down the idea. “No! Are you mad? The bear! Any sudden light or noise now would be catastrophic. We’ve crept past it; let’s not undo that careful work.”`,
      result:    `50/50 chance for results

Despite the reservations, they did need the light, so with a careful click they sparked the lantern's internal lighting mechanism and it lit up the chamber. The wall of roughage came into view, thorns and vines twisted into a leafy door. They needed only to strike it in the right spot with a few good hits. 

However, the light from their spell stretched far into the dark cave and, unbeknownst to the Aries it shone in the eyes of the sleeping bear. Blinking awake it stirred with a hefty huff and roused awake. The bear was infuriated with this premature awakening and planned to have its ire known. 


Despite the reservations, they did need the light, so with a careful click they sparked the lantern's internal lighting mechanism and it lit up the chamber.  The wall of roughage came into view, thorns and vines twisted into a leafy door. They needed only to strike it in the right spot with a few good hits. 

With the butt of their swords and a few good kicks with a hoof, the adventurers manage to break through the wall of branches and the path opens up to the rest of the forest. It was harrowing, but their brush with the bear ended without conflict. They hurried on into the forest to continue their hike to the spring.`,
      next: [
        { label: "Wake bear",    url: "m" },
        { label: "Escape", url: "l" }
      ]
    },
    {
      name:      "Hack through it in the dark",
      condition: "Requires item: Bladed weapon",
      prompt:    `${Player1Name} offered another solution. “Well, if we can’t see it, we can still brute force it. I can try to hack through it with a weapon. It’s dense, but nothing I can’t eventually cut down.”

“That would be incredibly noisy, ${Player1Name},” ${Player2Name} pointed out, a worried frown on ${Player2HisHerTheir} face. “The scraping and hacking would surely wake the bear. We’d lose the element of surprise entirely, and then we’d have a very angry, very large animal to contend with in pitch black, confined space.” ${cap(Player2HeSheThey)} shivered at the thought.

“So, what’s the alternative then?” ${Player3Name} challenged, ${Player3HisHerTheir} frustration growing. “Stay here forever? We need to get past this to the spring.”`,
      result:    `50/50 chance for results

With as much stealth and tact as they could muster the Aries began to hack at the leafage with their weapons. It was grueling work in the dark, cleaving through vines and branches. Thorns pricked their arms and bodies as they attempted to break through. 

They couldn't help but make noise as they did their work and to their horror it seemed to have been too much. A deep rolling snarl thundered through the cave towards them. The bear.


With as much stealth and tact as they could muster the Aries began to hack at the leafage with their weapons. It was grueling work in the dark, cleaving through vines and branches. Thorns pricked their arms and bodies as they attempted to break through. 

With the blades of their swords and a few good kicks with a hoof, the adventurers manage to break through the wall of branches and the path opens up to the rest of the forest. It was harrowing, but their brush with the bear ended without conflict. They hurried on into the forest to continue their hike to the spring.`,
      next: [
        { label: "Wake bear",    url: "m" },
        { label: "Escape", url: "l" }
      ]
    },
    {
      name:      "Kill the bear in its sleep",
      condition: "Always available",
      prompt:    `${Player4Name}, after a moment of thoughtful silence, spoke up, ${Player1HisHerTheir} voice barely a murmur. “There is… another option. One I truly dislike, but it sits in the realm of practicality, however cruel it may appear.”

The others turned to look at ${Player4HimHerThem}.
“The bear,” ${Player4Name} continued,heavily. “It is hibernating. Deeply, it seems. If we are truly desperate to avoid making noise while clearing this path, we could… deal with the bear first. While it sleeps. It would be… less of a fight, less of a commotion. We would eliminate the threat of it waking up before we even begin to tackle this obstruction.”

A heavy silence descended upon the group, thicker and colder than the cave air. The words hung in the darkness, stark and unsettling. Taking out a sleeping, innocent creature felt abhorrent. But the alternative…

“That’s… that’s horrible,” ${Player2Name} whispered, disgust in ${Player2HisHerTheir} voice. “To kill it in its sleep? It’s not attacking us. It’s just… existing.”

“I agree,” ${Player4Name} replied. “It is not an act I would ever condone under normal circumstances. But think of the consequences if we don’t address the bear. We try to brute force this bramble wall, the noise wakes it, and then we face an enraged beast, disoriented and deadly, in the dark. We would be at a severe disadvantage. The risk to us would be immense.”`,
      result:    `It felt awful but they knew this was their best chance for survival. The Aries carefully approached the bear, seeing its slumbering furry form in the dark cave just barely. With the deftest of hoof steps ${Player1Name} came close, with the others not far behind. They all raised their weapons, poised for the bear’s head and chest. 

${Player1Name} gave a nod and they all lunged forward into the creature, striking it with surprise blows. A loud and terrible roar sounded out and the Aries made a run for it. The bear got itself up and with a pained roar it staggered to its feet to take chase. They weren’t able to kill it in it’s sleep, but hopefully now, as they lead it to a more open space to fight, it will go down much swifter.

Bear starts at half-health.`,
      next:      { label: "Continue", url: "m" }
    },
    {
      name:      "Turn Back",
      condition: "Always available",
      prompt:    `“We could head back… try and find another way around the wall?” ${Player3Name} suggests.
The idea of sneaking back past the bear for a second time seemed impossible to them. But it was undoubtedly an option. Maybe they could find another way to the spring without having to surmount the cliffwall.`,
      result:    `Nervously, but determined in this choice, the adventurers turned back. Just as they had on the way into the cave, they walked slowly, kept quiet and passed by the sleeping bear carefully. Each quiet clop of their hooves on the stone floor made their hearts skip beats, but thankfully they were able to see the light from the end of the cave where they entered. They followed it steadily and cautiously until finally they were free of the cave. They would take a long while to find a way around the cliff but it was a better fate than succumbing to the ire of a disturbed grizzly. `,
      next:      { label: "Continue", url: "l" }
    },
    {
      name:      "Use Nature Spell",
      condition: "Requires mage with nature spell and mana to use it",
      prompt:    `MAGE paws at the wall feeling the vines and brambles with THEIR hands. “I can use my nature magic to move this aside without a noise.”

“That sounds smart,” ${Player3Name} agrees. “It will use up a spell but it could be our best option.”`,
      result:    `MAGE whispers the spell and a soft green glow emanates from THEIR WEAPON. Hopefully it’s not so bright as to wake the sleeping bear. With a silent flick of the wrist the vines and thorns and branches begin to shift and move away, clearing a path forward. Light floods in from the end of the tunnel. They had done it. The Adventurers rush forth, free from this tense cave and into the forest again to continue their hike to the spring!`,
      next:      { label: "Continue", url: "l" }
    }
  ];

  const grid     = document.getElementById("optionGrid");
  const resBox   = document.getElementById("resultBox");
  const resTitle = document.getElementById("resultTitle");
  const resText  = document.getElementById("resultText");
  const resAct   = document.getElementById("resultActions");

  actions.forEach((act, idx) => {
    const box = document.createElement("div");
    box.className = "option-box";
    box.innerHTML = `
      <h3>${act.name}</h3>
	<hr>
      <p><strong>Condition:</strong> ${act.condition}</p>
      <p>${act.prompt}</p>
      <div class="button-group">
        <button class="storyButton" onclick="showResult(${idx})">Proceed</button>
        <button class="storyButton" onclick="copyPrompt(${idx})">Copy Prompt</button>
      </div>
    `;
    grid.appendChild(box);
  });

  function showResult(idx) {
    const act = actions[idx];
    resTitle.innerText = `Result: ${act.name}`;
    resText.innerText  = act.result;
    resAct.innerHTML   = "";

    const nexts = Array.isArray(act.next) ? act.next : [act.next];
    nexts.forEach(({label, url}) => {
      const btn = document.createElement("button");
      btn.className = "storyButton";
      btn.innerText = label;
      btn.onclick   = () => goToPage(url);
      resAct.appendChild(btn);
    });

    const copyBtn = document.createElement("button");
    copyBtn.className = "storyButton";
    copyBtn.innerText = "Copy Result";
    copyBtn.onclick   = copyResult;
    resAct.appendChild(copyBtn);

    resBox.style.display = "block";
  }

  function copyPrompt(idx) {
    navigator.clipboard.writeText(actions[idx].prompt)
      .then(() => alert("Prompt copied!"))
      .catch(() => alert("Copy failed."));
  }

  function copyResult() {
    navigator.clipboard.writeText(resText.innerText)
      .then(() => alert("Result copied!"))
      .catch(() => alert("Copy failed."));
  }

  const title = "Tainted Spring: Cave Passage";
  document.getElementById("pageTitle").innerText   = title;
  document.getElementById("promptTitle").innerText = title;

  function goToFix()    { window.location.href = `fix.html?${params}`; }
  function goToPage(pg){ window.location.href = `${pg}.html?${params}`; }

  // copy full story text
  function copyStory(){
    navigator.clipboard.writeText(storyText)
      .then(() => alert("Story copied!"))
      .catch(() => alert("Copy failed."));
  }
</script>

</body>
</html>

